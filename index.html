<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×›×•×ª×‘ +AI - ×¢×•×–×¨ ×›×ª×™×‘×ª ×”×—×™×‘×•×¨×™× ×©×œ×š</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            direction: rtl;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .steps-nav {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 10px;
        }

        .step-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            background: #f0f0f0;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .step-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .step-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .step-content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .step-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-left: 5px solid #667eea;
        }

        .card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e1e1;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus,
        .input-group select:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .textarea-large {
            min-height: 200px;
            resize: vertical;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .feedback {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .feedback h4 {
            color: #2e7d32;
            margin-bottom: 10px;
        }

        .feedback ul {
            color: #388e3c;
            padding-right: 20px;
        }

        .tips {
            background: linear-gradient(45deg, #fff3e0, #ffcc80);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .tips h4 {
            color: #f57c00;
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        .emoji {
            font-size: 1.5em;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>×›×•×ª×‘ +AI <span class="emoji">âœï¸</span></h1>
            <p>×”×¢×•×–×¨ ×”×—×›× ×©×œ×š ×œ×›×ª×™×‘×ª ×—×™×‘×•×¨×™× ××¢×•×œ×™×!</p>
        </div>

        <div class="main-content">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 25%"></div>
            </div>

            <div class="steps-nav">
                <button class="step-btn active" onclick="showStep(1)">1. ×ª×›× ×•×Ÿ <span class="emoji">ğŸ¯</span></button>
                <button class="step-btn" onclick="showStep(2)">2. ×›×ª×™×‘×” <span class="emoji">âœï¸</span></button>
                <button class="step-btn" onclick="showStep(3)">3. ×¢×¨×™×›×” <span class="emoji">ğŸ”</span></button>
                <button class="step-btn" onclick="showStep(4)">4. ×¡×™×•× <span class="emoji">ğŸ‰</span></button>
            </div>

            <!-- ×©×œ×‘ 1: ×ª×›× ×•×Ÿ -->
            <div class="step-content active" id="step1">
                <div class="card">
                    <h3>×‘×•××• × ×ª×›× ×Ÿ ××ª ×”×—×™×‘×•×¨ ×©×œ×š! <span class="emoji">ğŸ“</span></h3>
                    
                    <div class="input-group">
                        <label for="essayType">××™×–×” ×¡×•×’ ×—×™×‘×•×¨ ××ª×” ×›×•×ª×‘?</label>
                        <select id="essayType" onchange="updateTips()">
                            <option value="">×‘×—×¨ ×¡×•×’ ×—×™×‘×•×¨...</option>
                            <option value="opinion">×—×™×‘×•×¨ ×¢××“×”</option>
                            <option value="compare">×—×™×‘×•×¨ ×”×©×•×•××”</option>
                            <option value="literary">× ×™×ª×•×— ×¡×¤×¨×•×ª×™</option>
                            <option value="research">×—×™×‘×•×¨ ××—×§×¨</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="topic">××” ×”× ×•×©× ×©×œ ×”×—×™×‘×•×¨?</label>
                        <input type="text" id="topic" placeholder="×œ××©×œ: ×”×©×¤×¢×ª ×”×˜×›× ×•×œ×•×’×™×” ×¢×œ ×”×—×‘×¨×” ×”××•×“×¨× ×™×ª">
                    </div>

                    <div class="input-group">
                        <label for="mainIdea">××” ×”×¨×¢×™×•×Ÿ ×”××¨×›×–×™ ×©×œ×š?</label>
                        <textarea id="mainIdea" placeholder="×ª××¨ ×‘×›××” ××©×¤×˜×™× ××ª ×”×¨×¢×™×•×Ÿ ×”×¢×™×§×¨×™ ×©×œ×š..."></textarea>
                    </div>

                    <div class="input-group">
                        <label for="arguments">×¨×©×•× 3 ×˜×™×¢×•× ×™× ×¢×™×§×¨×™×™×:</label>
                        <textarea id="arguments" placeholder="×˜×™×¢×•×Ÿ 1: ...&#10;×˜×™×¢×•×Ÿ 2: ...&#10;×˜×™×¢×•×Ÿ 3: ..."></textarea>
                    </div>

                    <button class="btn-primary" onclick="generateOutline()">×¦×•×¨ ××ª×•×•×” ×œ×—×™×‘×•×¨ <span class="emoji">ğŸš€</span></button>

                    <div id="outlineFeedback"></div>
                </div>

                <div class="tips" id="planningTips">
                    <h4>ğŸ’¡ ×˜×™×¤×™× ×œ×ª×›× ×•×Ÿ ×—×™×‘×•×¨ ××•×¦×œ×—:</h4>
                    <ul>
                        <li>×”×ª×—×™×œ ×¢× ×¨×¢×™×•×Ÿ ×‘×¨×•×¨ ×•××•×’×“×¨</li>
                        <li>×—×©×•×‘ ×¢×œ 3 ×˜×™×¢×•× ×™× ×—×–×§×™× ×”×ª×•××›×™× ×‘×¨×¢×™×•×Ÿ ×©×œ×š</li>
                        <li>×—×¤×© ×“×•×’×××•×ª ×•××§×•×¨×•×ª ×œ×›×œ ×˜×™×¢×•×Ÿ</li>
                        <li>×ª×›× ×Ÿ ××ª ×¡×“×¨ ×”×˜×™×¢×•× ×™× - ××”×—×œ×© ×œ×—×–×§</li>
                    </ul>
                </div>
            </div>

            <!-- ×©×œ×‘ 2: ×›×ª×™×‘×” -->
            <div class="step-content" id="step2">
                <div class="card">
                    <h3>×¢×›×©×™×• ×‘×•××• × ×›×ª×•×‘! <span class="emoji">âœï¸</span></h3>
                    
                    <div class="input-group">
                        <label for="introduction">×”×§×“××”:</label>
                        <textarea id="introduction" class="textarea-large" 
                                placeholder="×”×ª×—×œ ×‘××©×¤×˜ ××¢× ×™×™×Ÿ ×©×™×•×©×š ××ª ×”×§×•×¨×...&#10;×”×¦×’ ××ª ×”× ×•×©×...&#10;×¡×™×™× ×¢× ×”××©×¤×˜ ×”××¨×›×–×™ (×ª×–×”)..."></textarea>
                    </div>

                    <div class="input-group">
                        <label for="body1">×¤×¡×§×ª ×’×•×£ ×¨××©×•× ×”:</label>
                        <textarea id="body1" class="textarea-large" 
                                placeholder="×”×¦×’ ××ª ×”×˜×™×¢×•×Ÿ ×”×¨××©×•×Ÿ...&#10;×”×•×¡×£ ×“×•×’×××•×ª ×•××§×•×¨×•×ª...&#10;×”×¡×‘×¨ ×œ××” ×–×” ×ª×•××š ×‘×ª×–×” ×©×œ×š..."></textarea>
                    </div>

                    <div class="input-group">
                        <label for="body2">×¤×¡×§×ª ×’×•×£ ×©× ×™×™×”:</label>
                        <textarea id="body2" class="textarea-large" 
                                placeholder="×”×¦×’ ××ª ×”×˜×™×¢×•×Ÿ ×”×©× ×™..."></textarea>
                    </div>

                    <div class="input-group">
                        <label for="body3">×¤×¡×§×ª ×’×•×£ ×©×œ×™×©×™×ª:</label>
                        <textarea id="body3" class="textarea-large" 
                                placeholder="×”×¦×’ ××ª ×”×˜×™×¢×•×Ÿ ×”×©×œ×™×©×™..."></textarea>
                    </div>

                    <div class="input-group">
                        <label for="conclusion">××¡×§× ×”:</label>
                        <textarea id="conclusion" class="textarea-large" 
                                placeholder="×¡×›× ××ª ×”×˜×™×¢×•× ×™× ×”×¢×™×§×¨×™×™×...&#10;×—×–×•×¨ ×¢×œ ×”×ª×–×” ×‘××™×œ×™× ××—×¨×•×ª...&#10;×¡×™×™× ×¢× ××—×©×‘×” ×œ×¢×ª×™×“ ××• ×§×¨×™××” ×œ×¤×¢×•×œ×”..."></textarea>
                    </div>

                    <button class="btn-primary" onclick="analyzeWriting()">×‘×“×•×§ ××ª ×”×›×ª×™×‘×” ×©×œ×™ <span class="emoji">ğŸ”</span></button>

                    <div id="writingFeedback"></div>
                </div>

                <div class="tips">
                    <h4>ğŸ’¡ ×˜×™×¤×™× ×œ×›×ª×™×‘×” ×–×•×¨××ª:</h4>
                    <ul>
                        <li>×›×œ ×¤×¡×§×” ×¦×¨×™×›×” ×œ×”×ª×—×™×œ ×‘××©×¤×˜ × ×•×©× ×‘×¨×•×¨</li>
                        <li>×”×©×ª××© ×‘××™×œ×•×ª ×—×™×‘×•×¨: "×‘× ×•×¡×£", "×œ×¢×•××ª ×–××ª", "×œ×›×Ÿ"</li>
                        <li>×ª×Ÿ ×“×•×’×××•×ª ×§×•× ×§×¨×˜×™×•×ª ×œ×›×œ ×˜×™×¢×•×Ÿ</li>
                        <li>×©××•×¨ ×¢×œ ×–×¨×™××” ×œ×•×’×™×ª ×‘×™×Ÿ ×”×¤×¡×§××•×ª</li>
                    </ul>
                </div>
            </div>

            <!-- ×©×œ×‘ 3: ×¢×¨×™×›×” -->
            <div class="step-content" id="step3">
                <div class="card">
                    <h3>×‘×•××• × ×©×¤×¨ ××ª ×”×—×™×‘×•×¨! <span class="emoji">ğŸ”§</span></h3>
                    
                    <div class="input-group">
                        <label for="fullEssay">×”×“×‘×§ ×›××Ÿ ××ª ×”×—×™×‘×•×¨ ×”××œ× ×œ×‘×“×™×§×”:</label>
                        <textarea id="fullEssay" class="textarea-large" 
                                placeholder="×”×“×‘×§ ×›××Ÿ ××ª ×›×œ ×”×—×™×‘×•×¨..."></textarea>
                    </div>

                    <button class="btn-primary" onclick="checkEssay()">×‘×“×•×§ ×“×§×“×•×§ ×•××‘× ×” <span class="emoji">ğŸ¯</span></button>

                    <div id="editingFeedback"></div>
                </div>

                <div class="tips">
                    <h4>ğŸ” ×¨×©×™××ª ×‘×“×™×§×•×ª ×œ×¢×¨×™×›×”:</h4>
                    <ul>
                        <li>âœ… ×‘×“×•×§ ×©×’×™××•×ª ×›×ª×™×‘ ×•×“×§×“×•×§</li>
                        <li>âœ… ×•×•×“× ×©×›×œ ×¤×¡×§×” ××ª×—×™×œ×” ×‘××©×¤×˜ × ×•×©×</li>
                        <li>âœ… ×‘×“×•×§ ×©×”××¢×‘×¨×™× ×‘×™×Ÿ ×¤×¡×§××•×ª ×—×œ×§×™×</li>
                        <li>âœ… ×•×•×“× ×©×”××¡×§× ×” ××¡×›××ª ××ª ×›×œ ×”×˜×™×¢×•× ×™×</li>
                        <li>âœ… ×§×¨× ×‘×§×•×œ ×¨× ×œ×‘×“×™×§×ª ×–×¨×™××”</li>
                    </ul>
                </div>
            </div>

            <!-- ×©×œ×‘ 4: ×¡×™×•× -->
            <div class="step-content" id="step4">
                <div class="card">
                    <h3>××–×œ ×˜×•×‘! ×”×—×™×‘×•×¨ ×©×œ×š ××•×›×Ÿ! <span class="emoji">ğŸ‰</span></h3>
                    
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 4em; margin-bottom: 20px;">ğŸ†</div>
                        <h2 style="color: #667eea; margin-bottom: 20px;">×¢×‘×•×“×” ××¢×•×œ×”!</h2>
                        <p style="font-size: 1.2em; margin-bottom: 30px;">
                            ×¢×‘×¨×ª ××ª ×›×œ ×”×©×œ×‘×™× ×‘×”×¦×œ×—×”. ×”×—×™×‘×•×¨ ×©×œ×š ××•×›×Ÿ ×œ×”×’×©×”!
                        </p>
                        
                        <div class="card" style="background: #f8f9fa; margin: 20px 0;">
                            <h4>ğŸ“Š ×¡×™×›×•× ×”×ª×”×œ×™×š:</h4>
                            <div id="processSummary">
                                <p>âœ… ×ª×›× × ×ª ××ª ×”×—×™×‘×•×¨ ×©×œ×š</p>
                                <p>âœ… ×›×ª×‘×ª ××ª ×›×œ ×”×—×œ×§×™×</p>
                                <p>âœ… ×¢×¨×›×ª ×•×©×™×¤×¨×ª</p>
                                <p>âœ… ×”×—×™×‘×•×¨ ××•×›×Ÿ ×œ×”×’×©×”!</p>
                            </div>
                        </div>

                        <button class="btn-primary" onclick="downloadEssay()">×”×•×¨×“ ××ª ×”×—×™×‘×•×¨ <span class="emoji">ğŸ’¾</span></button>
                        <button class="btn-primary" onclick="startNew()" style="margin-right: 10px;">×”×ª×—×œ ×—×™×‘×•×¨ ×—×“×© <span class="emoji">ğŸ”„</span></button>
                    </div>
                </div>

                <div class="tips">
                    <h4>ğŸš€ ×˜×™×¤×™× ×œ×¤×¢× ×”×‘××”:</h4>
                    <ul>
                        <li>×©××•×¨ ××ª ×”××ª×•×•×” - ×–×” ×™×¢×–×•×¨ ×œ×š ×‘×—×™×‘×•×¨×™× ×”×‘××™×</li>
                        <li>×§×¨× ×—×™×‘×•×¨×™× ×˜×•×‘×™× ×œ×©×™×¤×•×¨ ×”×¡×’× ×•×Ÿ</li>
                        <li>×ª×¨×’×œ ×›×ª×™×‘×” ×§×¦×¨×” ×™×•× ×™×•×</li>
                        <li>××œ ×ª×©×›×— ×œ×¢×¨×•×š ×ª××™×“ ×œ×¤× ×™ ×”×’×©×”!</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let essayData = {};

        function showStep(stepNumber) {
            // ×”×¡×ª×¨ ××ª ×›×œ ×”×©×œ×‘×™×
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`step${i}`).classList.remove('active');
                document.querySelector(`.step-btn:nth-child(${i})`).classList.remove('active');
            }
            
            // ×”×¦×’ ××ª ×”×©×œ×‘ ×”× ×‘×—×¨
            document.getElementById(`step${stepNumber}`).classList.add('active');
            document.querySelector(`.step-btn:nth-child(${stepNumber})`).classList.add('active');
            
            currentStep = stepNumber;
            updateProgressBar();
        }

        function updateProgressBar() {
            const progress = (currentStep / 4) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function updateTips() {
            const essayType = document.getElementById('essayType').value;
            const tipsElement = document.getElementById('planningTips');
            
            const tips = {
                opinion: {
                    title: 'ğŸ’¡ ×˜×™×¤×™× ×œ×—×™×‘×•×¨ ×¢××“×”:',
                    content: [
                        '×‘×—×¨ ×¢××“×” ×‘×¨×•×¨×” ×•×¢××•×“ ×¢×œ×™×” ×œ××•×¨×š ×›×œ ×”×—×™×‘×•×¨',
                        '×”×¦×’ ×˜×™×¢×•× ×™× ×—×–×§×™× ×•××©×›× ×¢×™×',
                        '×”×ª×™×™×—×¡ ×œ×¢××“×•×ª × ×’×“×™×•×ª ×•×—×–×§ ××ª ×¢××“×ª×š',
                        '×”×©×ª××© ×‘×“×•×’×××•×ª ××™×©×™×•×ª ××• ××”×—×™×™×'
                    ]
                },
                compare: {
                    title: 'ğŸ’¡ ×˜×™×¤×™× ×œ×—×™×‘×•×¨ ×”×©×•×•××”:',
                    content: [
                        '×‘×—×¨ × ×§×•×“×•×ª ×”×©×•×•××” ×‘×¨×•×¨×•×ª ×•×¢×§×‘×™×•×ª',
                        '×”×©×•×•×” ×‘××•×¤×Ÿ ×”×•×’×Ÿ ×•×××•×–×Ÿ',
                        '××¨×’×Ÿ ×œ×¤×™ × ×•×©××™× ××• ×œ×¤×™ ×¤×¨×™×˜×™×',
                        '×”×¡×§ ××¡×§× ×•×ª ××”×©×•×•××•×ª'
                    ]
                },
                literary: {
                    title: 'ğŸ’¡ ×˜×™×¤×™× ×œ× ×™×ª×•×— ×¡×¤×¨×•×ª×™:',
                    content: [
                        '×”×ª××§×“ ×‘× ×•×©× ××• ××•×˜×™×‘ ××¨×›×–×™',
                        '×”×‘×™× ×¦×™×˜×•×˜×™× ××“×•×™×§×™× ××”×˜×§×¡×˜',
                        '× ×ª×— ×××¦×¢×™× ×¡×¤×¨×•×ª×™×™×',
                        '×§×©×¨ ×‘×™×Ÿ ×”×˜×›× ×™×§×” ×œ××¡×¨'
                    ]
                }
            };

            if (tips[essayType]) {
                tipsElement.innerHTML = `
                    <h4>${tips[essayType].title}</h4>
                    <ul>
                        ${tips[essayType].content.map(tip => `<li>${tip}</li>`).join('')}
                    </ul>
                `;
            }
        }

        function generateOutline() {
            const topic = document.getElementById('topic').value;
            const mainIdea = document.getElementById('mainIdea').value;
            const arguments = document.getElementById('arguments').value;

            if (!topic || !mainIdea || !arguments) {
                alert('×× × ××œ× ××ª ×›×œ ×”×©×“×•×ª ×›×“×™ ×œ×§×‘×œ ××ª×•×•×” ××•×ª××!');
                return;
            }

            const feedback = document.getElementById('outlineFeedback');
            feedback.innerHTML = `
                <div class="feedback">
                    <h4>ğŸ¯ ×”××ª×•×•×” ×©×œ×š ××•×›×Ÿ!</h4>
                    <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px;">
                        <h5>ğŸ“ ××‘× ×” ×”×—×™×‘×•×¨ ×”××•××œ×¥:</h5>
                        <p><strong>×”×§×“××”:</strong> ×”×¦×’×ª ×”× ×•×©× "${topic}" ×•×”×¨×¢×™×•×Ÿ ×”××¨×›×–×™</p>
                        <p><strong>×¤×¡×§×ª ×’×•×£ 1:</strong> ${arguments.split('\n')[0] || '×”×˜×™×¢×•×Ÿ ×”×¨××©×•×Ÿ'}</p>
                        <p><strong>×¤×¡×§×ª ×’×•×£ 2:</strong> ${arguments.split('\n')[1] || '×”×˜×™×¢×•×Ÿ ×”×©× ×™'}</p>
                        <p><strong>×¤×¡×§×ª ×’×•×£ 3:</strong> ${arguments.split('\n')[2] || '×”×˜×™×¢×•×Ÿ ×”×©×œ×™×©×™'}</p>
                        <p><strong>××¡×§× ×”:</strong> ×¡×™×›×•× ×”×˜×™×¢×•× ×™× ×•×—×™×–×•×§ ×”×¨×¢×™×•×Ÿ ×”××¨×›×–×™</p>
                    </div>
                    <p style="margin-top: 15px;">ğŸ’ª × ×”×“×¨! ×¢×›×©×™×• ××ª×” ××•×›×Ÿ ×œ×¢×‘×•×¨ ×œ×©×œ×‘ ×”×›×ª×™×‘×”!</p>
                </div>
            `;

            // ×©××™×¨×ª ×”× ×ª×•× ×™×
            essayData = { topic, mainIdea, arguments };
        }

        function analyzeWriting() {
            const intro = document.getElementById('introduction').value;
            const body1 = document.getElementById('body1').value;
            const body2 = document.getElementById('body2').value;
            const body3 = document.getElementById('body3').value;
            const conclusion = document.getElementById('conclusion').value;

            const feedback = document.getElementById('writingFeedback');
            
            let score = 0;
            let suggestions = [];

            // ×‘×“×™×§×•×ª ×‘×¡×™×¡×™×•×ª
            if (intro.length > 100) score += 20;
            else suggestions.push('×”×§×“××” ×§×¦×¨×” ××“×™ - ×”×•×¡×£ ×¢×•×“ ×¤×¨×˜×™×');

            if (body1.length > 150 && body2.length > 150 && body3.length > 150) score += 30;
            else suggestions.push('×¤×¡×§××•×ª ×”×’×•×£ ×¦×¨×™×›×•×ª ×œ×”×™×•×ª ××¤×•×¨×˜×•×ª ×™×•×ª×¨');

            if (conclusion.length > 100) score += 20;
            else suggestions.push('××¡×§× ×” ×§×¦×¨×” ××“×™ - ×”×•×¡×£ ×¡×™×›×•× ×©×œ ×”×˜×™×¢×•× ×™×');

            if (intro.includes('×‘× ×•×¡×£') || intro.includes('×œ×›×Ÿ') || intro.includes('×œ×¢×•××ª ×–××ª')) score += 15;
            else suggestions.push('×”×©×ª××© ×‘××™×œ×•×ª ×—×™×‘×•×¨ ×œ×–×¨×™××” ×˜×•×‘×” ×™×•×ª×¨');

            if (score < 50) suggestions.push('×§×¨× ××ª ×”×—×™×‘×•×¨ ×‘×§×•×œ ×¨× ×œ×‘×“×™×§×ª ×–×¨×™××”');

            score = Math.min(score + 15, 100); // ×‘×•× ×•×¡ ×‘×¡×™×¡×™

            feedback.innerHTML = `
                <div class="feedback">
                    <h4>ğŸ“Š × ×™×ª×•×— ×”×›×ª×™×‘×” ×©×œ×š: ${score}/100</h4>
                    ${suggestions.length > 0 ? `
                        <h5>ğŸ’¡ ×”×¦×¢×•×ª ×œ×©×™×¤×•×¨:</h5>
                        <ul>
                            ${suggestions.map(s => `<li>${s}</li>`).join('')}
                        </ul>
                    ` : '<p>ğŸ‰ ×›×ª×™×‘×” ××¢×•×œ×”! ×”×—×™×‘×•×¨ × ×¨××” ×˜×•×‘!</p>'}
                    <p style="margin-top: 15px;">
                        ${score >= 80 ? 'ğŸ† ××¢×•×œ×”! ××•×›×Ÿ ×œ×¢×‘×•×¨ ×œ×©×œ×‘ ×”×¢×¨×™×›×”!' : 
                          score >= 60 ? 'ğŸ‘ ×˜×•×‘! ×¢×•×“ ×§×¦×ª ×©×™×¤×•×¨×™× ×•×ª×”×™×” ××•×›×Ÿ!' : 
                          'ğŸ’ª ×›×™×•×•×Ÿ ×˜×•×‘! ×ª××©×™×š ×œ×©×¤×¨!'}
                    </p>
                </div>
            `;
        }

        function checkEssay() {
            const essay = document.getElementById('fullEssay').value;
            
            if (!essay.trim()) {
                alert('×× × ×”×“×‘×§ ××ª ×”×—×™×‘×•×¨ ×©×œ×š ×œ×‘×“×™×§×”!');
                return;
            }

            const feedback = document.getElementById('editingFeedback');
            
            // ×‘×“×™×§×•×ª ×‘×¡×™×¡×™×•×ª
            const wordCount = essay.split(' ').length;
            const paragraphs = essay.split('\n\n').length;
            
            let issues = [];
            let strengths = [];

            // ×‘×“×™×§×ª ××•×¨×š
            if (wordCount < 300) issues.push('×”×—×™×‘×•×¨ ×§×¦×¨ ××“×™ - ×”×•×¡×£ ×¢×•×“ ×¤×¨×˜×™× ×•×“×•×’×××•×ª');
            else if (wordCount > 800) issues.push('×”×—×™×‘×•×¨ ××¨×•×š ××“×™ - × ×¡×” ×œ×§×¦×¨ ×•×œ×”×ª××§×“');
            else strengths.push('××•×¨×š ×”×—×™×‘×•×¨ ××ª××™×');

            // ×‘×“×™×§×ª ××‘× ×”
            if (paragraphs < 4) issues.push('×—×¡×¨×•×ª ×¤×¡×§××•×ª - ×•×•×“× ×©×™×© ×œ×š ×”×§×“××”, 3 ×¤×¡×§××•×ª ×’×•×£ ×•××¡×§× ×”');
            else strengths.push('××‘× ×” ×¤×¡×§××•×ª ×ª×§×™×Ÿ');

            // ×‘×“×™×§×•×ª × ×•×¡×¤×•×ª
            if (essay.includes('×œ×›×Ÿ') || essay.includes('×‘× ×•×¡×£') || essay.includes('×œ×¢×•××ª ×–××ª')) {
                strengths.push('×©×™××•×© ×˜×•×‘ ×‘××™×œ×•×ª ×—×™×‘×•×¨');
            } else {
                issues.push('×”×•×¡×£ ××™×œ×•×ª ×—×™×‘×•×¨ ×œ×–×¨×™××” ×˜×•×‘×” ×™×•×ª×¨');
            }

            feedback.innerHTML = `
                <div class="feedback">
                    <h4>ğŸ” ×ª×•×¦××•×ª ×”×‘×“×™×§×”:</h4>
                    <p><strong>ğŸ“Š ×¡×˜×˜×™×¡×˜×™×§×•×ª:</strong> ${wordCount} ××™×œ×™×, ${paragraphs} ×¤×¡×§××•×ª</p>
                    
                    ${strengths.length > 0 ? `
                        <h5 style="color: #2e7d32;">âœ… × ×§×•×“×•×ª ×—×–×§:</h5>
                        <ul style="color: #388e3c;">
                            ${strengths.map(s => `<li>${s}</li>`).join('')}
                        </ul>
                    ` : ''}
                    
                    ${issues.length > 0 ? `
                        <h5 style="color: #d32f2f;">âš ï¸ × ×§×•×“×•×ª ×œ×©×™×¤×•×¨:</h5>
                        <ul style="color: #c62828;">
                            ${issues.map(i => `<li>${i}</li>`).join('')}
                        </ul>
                    ` : ''}
                    
                    <p style="margin-top: 15px;">
                        ${issues.length === 0 ? 'ğŸ‰ ×”×—×™×‘×•×¨ × ×¨××” ××¢×•×œ×”! ××•×›×Ÿ ×œ×”×’×©×”!' : 
                          issues.length <= 2 ? 'ğŸ‘ ×›××¢×˜ ××•×©×œ×! ×ª×§×Ÿ ××ª ×”× ×§×•×“×•×ª ×”××œ×” ×•×ª×”×™×” ××•×›×Ÿ!' : 
                          'ğŸ’ª ×™×© ×¢×•×“ ××” ×œ×©×¤×¨, ××‘×œ ××ª×” ×‘×›×™×•×•×Ÿ ×”× ×›×•×Ÿ!'}
                    </p>
                </div>
            `;
        }

        function downloadEssay() {
            const essay = document.getElementById('fullEssay').value || 
                         '×”×—×™×‘×•×¨ ×©×œ×š ××•×›×Ÿ! ×× × ×—×–×•×¨ ×œ×©×œ×‘ ×”×›×ª×™×‘×” ×œ×”×©×œ××ª ×”×ª×•×›×Ÿ.';
            
            const blob = new Blob([essay], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = '×”×—×™×‘×•×¨-×©×œ×™.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        function startNew() {
            if (confirm('×”×× ××ª×” ×‘×˜×•×— ×©××ª×” ×¨×•×¦×” ×œ×”×ª×—×™×œ ×—×™×‘×•×¨ ×—×“×©? ×”× ×ª×•× ×™× ×”× ×•×›×—×™×™× ×™×™××—×§×•.')) {
                // ××™×¤×•×¡ ×›×œ ×”×©×“×•×ª
                document.getElementById('essayType').value = '';
                document.getElementById('topic').value = '';
                document.getElementById('mainIdea').value = '';
                document.getElementById('arguments').value = '';
                document.getElementById('introduction').value = '';
                document.getElementById('body1').value = '';
                document.getElementById('body2').value = '';
                document.getElementById('body3').value = '';
                document.getElementById('conclusion').value = '';
                document.getElementById('fullEssay').value = '';
                
                // ××™×¤×•×¡ ××©×•×‘
                document.getElementById('outlineFeedback').innerHTML = '';
                document.getElementById('writingFeedback').innerHTML = '';
                document.getElementById('editingFeedback').innerHTML = '';
                
                // ×—×–×¨×” ×œ×©×œ×‘ ×¨××©×•×Ÿ
                showStep(1);
                essayData = {};
                
                alert('ğŸ‰ ××•×›×Ÿ ×œ×”×ª×—×™×œ ×—×™×‘×•×¨ ×—×“×©!');
            }
        }

        // ×”×•×¡×¤×ª ××¤×§×˜×™× ××™× ×˜×¨××§×˜×™×‘×™×™×
        document.addEventListener('DOMContentLoaded', function() {
            // ×× ×™××¦×™×” ×œ×›×¤×ª×•×¨×™×
            const buttons = document.querySelectorAll('.btn-primary');
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                });
            });

            // ×©××™×¨×” ××•×˜×•××˜×™×ª
            const inputs = document.querySelectorAll('input, textarea, select');
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    const data = {};
                    inputs.forEach(inp => {
                        if (inp.value) data[inp.id] = inp.value;
                    });
                    // ×‘×¡×‘×™×‘×” ×××™×ª×™×ª × ×©××•×¨ ×‘-localStorage
                    // localStorage.setItem('essayDraft', JSON.stringify(data));
                });
            });

            // ×”×•×“×¢×•×ª ×¢×™×“×•×“
            const encouragements = [
                "××ª×” ×¢×•×©×” ×¢×‘×•×“×” × ×”×“×¨×ª! ğŸ’ª",
                "×”××©×š ×›×š - ×–×” × ×¨××” ××¢×•×œ×”! ğŸŒŸ", 
                "×›×ª×™×‘×” ×–×•×¨××ª ×•×‘×¨×•×¨×”! ğŸ‘",
                "××ª×” ×¢×œ ×”×“×¨×š ×”× ×›×•× ×”! ğŸ¯",
                "×¢×•×“ ×§×¦×ª ×•×ª×¡×™×™×! ğŸš€"
            ];

            // ×”×¦×’×ª ×”×•×“×¢×ª ×¢×™×“×•×“ ××§×¨××™×ª
            function showEncouragement() {
                const message = encouragements[Math.floor(Math.random() * encouragements.length)];
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: linear-gradient(45deg, #667eea, #764ba2);
                    color: white;
                    padding: 15px 25px;
                    border-radius: 25px;
                    font-weight: bold;
                    z-index: 1000;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                    animation: slideDown 0.5s ease;
                `;
                notification.textContent = message;
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.style.animation = 'slideUp 0.5s ease';
                    setTimeout(() => notification.remove(), 500);
                }, 3000);
            }

            // ×”×¦×’×ª ×¢×™×“×•×“ ×›×œ 2 ×“×§×•×ª ×©×œ ×›×ª×™×‘×”
            let typingTimer;
            inputs.forEach(input => {
                if (input.tagName === 'TEXTAREA') {
                    input.addEventListener('input', function() {
                        clearTimeout(typingTimer);
                        typingTimer = setTimeout(() => {
                            if (this.value.length > 50) {
                                showEncouragement();
                            }
                        }, 120000); // 2 ×“×§×•×ª
                    });
                }
            });
        });

        // ×”×•×¡×¤×ª ×¡×˜×™×™×œ×™× ×œ×× ×™××¦×™×•×ª
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideDown {
                from {
                    transform: translateX(-50%) translateY(-100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(-50%) translateY(0);
                    opacity: 1;
                }
            }
            
            @keyframes slideUp {
                from {
                    transform: translateX(-50%) translateY(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(-50%) translateY(-100%);
                    opacity: 0;
                }
            }

            .input-group input:focus,
            .input-group textarea:focus,
            .input-group select:focus {
                animation: glow 0.3s ease;
            }

            @keyframes glow {
                0% { box-shadow: 0 0 0 3px rgba(102, 126, 234, 0); }
                50% { box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3); }
                100% { box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }
            }

            .card {
                transition: transform 0.2s ease;
            }

            .card:hover {
                transform: translateY(-2px);
            }

            /* ×¨×¡×¤×•× ×¡×™×‘×™×•×ª ×œ××•×‘×™×™×œ */
            @media (max-width: 768px) {
                .container {
                    padding: 10px;
                }
                
                .header h1 {
                    font-size: 2em;
                }
                
                .steps-nav {
                    flex-wrap: wrap;
                    gap: 5px;
                }
                
                .step-btn {
                    font-size: 14px;
                    padding: 10px 15px;
                }
                
                .main-content {
                    padding: 20px;
                }
                
                .card {
                    padding: 20px;
                }
            }

            @media (max-width: 480px) {
                .header h1 {
                    font-size: 1.8em;
                }
                
                .step-btn {
                    font-size: 12px;
                    padding: 8px 12px;
                }
                
                .step-btn .emoji {
                    display: none;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
                
